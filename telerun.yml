lab_name: "C++ Hello World Lab"
source_code_loc: "."

build:
  build_script: scripts/build.sh
  eval_binary: ./hello_world_eval

module_script: scripts/module.sh
run_command: ./hello_world

thresholds:
  correctness: diff
  perf_ms: 1000

slurm:
  enabled: true
  partition: batch
  time: "00:10:00"
  nodes: 1
  mem: 0
  exclusive: true

tests:
  - name: small
    args: ["test"]
    expected_output: "hello world1\n"
    leaderboard: false
  - name: medium
    args: ["--size", "500000"]
    # expected_file: "./temp.txt"
    leaderboard: true

pipelines:
  benchmark:
    - name: sync to cluster
      kind: sync
      continue_on_error: false

    - name: remote build
      kind: build

    - name: run small
      kind: run
      test: small

    - name: evaluate all
      kind: eval
      submit: true

# env:
  # OMP_NUM_THREADS: "8"
